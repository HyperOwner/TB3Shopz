local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local executor = identifyexecutor and identifyexecutor() or "Unknown Executor"

-- ================= SAFE TELEPORT FUNCTION (REQUIRED) =================
-- ASSUMES SafeTeleport IS ALREADY DEFINED IN YOUR ENVIRONMENT
-- =====================================================================

local customTheme = {
   TextColor = Color3.fromRGB(0, 255, 0),
   Background = Color3.fromRGB(10, 10, 10),
   Topbar = Color3.fromRGB(0, 0, 0),
   Shadow = Color3.fromRGB(30, 30, 30),
   NotificationBackground = Color3.fromRGB(15, 15, 15),
   NotificationActionsBackground = Color3.fromRGB(20, 20, 20),
   TabBackground = Color3.fromRGB(10, 10, 10),
   TabStroke = Color3.fromRGB(0, 255, 0),
   TabBackgroundSelected = Color3.fromRGB(20, 20, 20),
   TabTextColor = Color3.fromRGB(100, 255, 100),
   SelectedTabTextColor = Color3.fromRGB(0, 255, 0),
   ElementBackground = Color3.fromRGB(15, 15, 15),
   ElementBackgroundHover = Color3.fromRGB(25, 25, 25),
   SecondaryElementBackground = Color3.fromRGB(20, 20, 20),
   ElementStroke = Color3.fromRGB(0, 255, 0),
   SecondaryElementStroke = Color3.fromRGB(0, 255, 0),
   SliderBackground = Color3.fromRGB(30, 30, 30),
   SliderProgress = Color3.fromRGB(0, 255, 0),
   SliderStroke = Color3.fromRGB(0, 255, 0),
   ToggleBackground = Color3.fromRGB(25, 25, 25),
   ToggleEnabled = Color3.fromRGB(0, 255, 0),
   ToggleDisabled = Color3.fromRGB(80, 80, 80),
   ToggleEnabledStroke = Color3.fromRGB(0, 255, 0),
   ToggleDisabledStroke = Color3.fromRGB(80, 80, 80),
   ToggleEnabledOuterStroke = Color3.fromRGB(0, 255, 0),
   ToggleDisabledOuterStroke = Color3.fromRGB(50, 50, 50),
   DropdownSelected = Color3.fromRGB(30, 30, 30),
   DropdownUnselected = Color3.fromRGB(20, 20, 20),
   InputBackground = Color3.fromRGB(10, 10, 10),
   InputStroke = Color3.fromRGB(0, 255, 0),
   PlaceholderColor = Color3.fromRGB(0, 255, 0),
   KeyInputBackground = Color3.fromRGB(10, 10, 10),
   KeyInputTextColor = Color3.fromRGB(0, 255, 0)
}

local Window = Rayfield:CreateWindow({
   Name = "X-Dk V2 | Tha Bronx | " .. executor,
   Theme = customTheme,
   KeySystem = false
})

-- ================= MAIN TAB =================
local MainTab = Window:CreateTab("Main", 4483362458)
MainTab:CreateParagraph({Title = "Welcome!", Content = "Thank you for using X-Dk."})

local player = Players.LocalPlayer
MainTab:CreateLabel("Player: " .. player.Name)
MainTab:CreateLabel("User Id: " .. player.UserId)
MainTab:CreateLabel("Executor: " .. executor)

-- ================= INFINITE MONEY =================
local InfiniteMoneyTab = Window:CreateTab("Infinite Money", 4483362458)

InfiniteMoneyTab:CreateButton({
    Name = "Infinite Money",
    Callback = function()
        local World = workspace
        local SharedStorage = game.ReplicatedStorage
        local Player = Players.LocalPlayer

        local function Notify(t, d, tm)
            Rayfield:Notify({Title = t, Content = d, Duration = tm or 5})
        end

        local function Teleport(pos)
            if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
                SafeTeleport(CFrame.new(pos))
                task.wait(0.4)
            end
        end

        local function FindItem(name)
            return Player.Backpack:FindFirstChild(name) or Player.Character:FindFirstChild(name)
        end

        local function BuySupplies()
            local Items = { "Ice-Fruit Bag", "Ice-Fruit Cupz", "FijiWater", "FreshWater" }
            for _, item in ipairs(Items) do
                game.ReplicatedStorage.ExoticShopRemote:InvokeServer(item)
                task.wait(1.25)
            end
            return true
        end

        BuySupplies()

        local CookingPot
        for _, pot in ipairs(World.CookingPots:GetChildren()) do
            if pot:FindFirstChild("CookPart") then
                CookingPot = pot
                break
            end
        end

        local CookPart = CookingPot.CookPart
        local Prompt = CookPart.ProximityPrompt

        Teleport(CookPart.Position)
        fireproximityprompt(Prompt)

        for _, item in ipairs({
            FindItem("FijiWater"),
            FindItem("FreshWater"),
            FindItem("Ice-Fruit Bag")
        }) do
            Player.Character.Humanoid:EquipTool(item)
            task.wait(0.4)
            fireproximityprompt(Prompt)
            task.wait(5)
        end

        Teleport(CookPart.Position)
        Player.Character.Humanoid:EquipTool(FindItem("Ice-Fruit Cupz"))
        fireproximityprompt(Prompt)

        local SellPart = World["IceFruit Sell"]
        Teleport(SellPart.Position)

        for i = 1, 2000 do
            fireproximityprompt(SellPart.ProximityPrompt)
        end

        Notify("Success", "Infinite Money Finished!", 6)
    end
})

-- ================= CONSTRUCTION =================
local ConstructionTab = Window:CreateTab("Construction", 4483362458)

ConstructionTab:CreateButton({
   Name = "Start Construction Job",
   Callback = function()
      SafeTeleport(CFrame.new(-1728, 371, -1172))
      task.wait(0.4)
      fireproximityprompt(workspace.ConstructionStuff["Start Job"].ProximityPrompt)
   end
})

local autofarmRunning = false

ConstructionTab:CreateToggle({
   Name = "Enable Construction Autofarm",
   Callback = function(Value)
      autofarmRunning = Value
      local speaker = Players.LocalPlayer

      local function hasPlyWood()
         return speaker.Backpack:FindFirstChild("PlyWood") or speaker.Character:FindFirstChild("PlyWood")
      end

      local function grabWood()
         SafeTeleport(CFrame.new(-1727, 371, -1178))
         task.wait(0.4)
         fireproximityprompt(workspace.ConstructionStuff["Grab Wood"].ProximityPrompt)
      end

      local function buildWall(promptName, cf)
         local prompt = workspace.ConstructionStuff[promptName].ProximityPrompt
         while autofarmRunning and prompt.Enabled do
            SafeTeleport(cf)
            task.wait(0.4)
            fireproximityprompt(prompt)
            if not hasPlyWood() then grabWood() end
         end
      end

      task.spawn(function()
         while autofarmRunning do
            buildWall("Wall2 Prompt", CFrame.new(-1705, 368, -1151))
            buildWall("Wall3 Prompt", CFrame.new(-1732, 368, -1152))
            buildWall("Wall4 Prompt2", CFrame.new(-1772, 368, -1152))
            buildWall("Wall1 Prompt3", CFrame.new(-1674, 368, -1166))
            task.wait(0.1)
         end
      end)
   end
})
